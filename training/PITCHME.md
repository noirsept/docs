<!-- 新人研修用ドキュメント　-->
### Training Document

そのサイトにアクセスした場合何が起こってるのか？


---


### アジェンダ

- はじめに
- WEBの基本
- IPアドレスとは？
- ドメインとは？
- WEB配信におけるIPアドレスとDNSの関係

---

## はじめに

普段ほとんどの人がブラウザ経由でいろいろなサイトを参照しています。
ただし、ほとんどの人がサイトが表示されるまでどのようなことが起こっているか理解していない人がほとんどです。

この研修では端末からサイトにアクセスするまでどのような処理がされているかをインフラ的な視点で説明します。


### WEBの基本

皆さんはWEBサイトやアプリを利用するときにアクセスしてからどのような処理があって最終的に表示されるかわかりますか？

普通は気にしないですよね・・・ｗ

では初めての場所に行く場合どのように行きますか？

+++

- 住所を調べる
- 地図等で出発地点から目的地までの経路を調べる
- 調べた情報を元に目的に向かう

という流れになるかと。

+++

この流れをWEBサイトのアクセスに当てはめると

- 住所を調べる<br>
=> DNSサーバでドメインからIPアドレスに変換

- 地図等で出発地点から目的地までの経路を調べる<br>
- 調べた情報を元に目的に向かう
=> いろいろな経路を経て該当のコンテンツサーバにアクセスする

という流れになります。

---

### (改めて)IPアドレス、ドメイン名とは

+++

#### IPアドレスとは？

通信機器(パソコンやスマホ)が理解できるネットワーク上の住所

これには２つ種類がありどちらも利用できるアドレスは決まっています。

- グローバルアドレス
  - 全世界において唯一無二のアドレスであり、重複しないように管理されている。
  - 重複した場合最悪相手側から賠償請求されることもある(かもしれない)

- プライベートアドレス
  - プライベートネットワーク内において自由に設定できるアドレスである。
  - 異なるプライベートネットワークであれば重複することは可能である。

+++

#### ドメインとは？

ドメインというのは正式名称は「Fully Qualified Domain Name」(略してFQDN)と呼ばれます。
ざっくりといえばIPアドレスより人間にわかりやすくしたもという感じです。

---

### DNSについて

IPアドレスとドメインを関連付けするシステムがDNS(ドメインネームシステム)になります。

普通は明示的に指定しなくてもパソコンやスマホの場合自動的に設定されます。
これはDHCPというシステムでIPアドレス付与と同時にDNSサーバの指定もされるからです。

自分で付与する場合よく使われるのが[Google Public DNS](https://developers.google.com/speed/public-dns/)になります。

またDNSは自分で用意することもできます。

---
### DNSの使われ方

では実際にブラウザからサイトへのアクセスを行った場合どのような処理がされるか説明します。

1. ユーザがブラウザにURLを入力
2. 端末からDNSサーバに正びきをかける<br>
```www.yahoo.co.jp```のAレコードはなんですか？
3. DNSサーバからAレコードの返答を受ける
```
www.yahoo.co.jp.        434     IN      CNAME   edge12.g.yimg.jp.
edge12.g.yimg.jp.       49      IN      A       182.22.25.124
```
4. 端末から```182.22.25.124```にアクセス

となります。
  
  
  
  
  
